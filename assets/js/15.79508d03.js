(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{796:function(t,e,a){"use strict";a.r(e);var s=a(34),n=Object(s.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h3",{attrs:{id:"tomcat基本配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tomcat基本配置"}},[t._v("#")]),t._v(" Tomcat基本配置")]),t._v(" "),a("p",[t._v("我们在构建一个网站的时候,常常选择Tomcat作为服务器的工程项目容器.所以我们需要将域名配置到Tomcat上,也就是说我们可以通过域名直接访问我们的网站.\n"),t._v("\n先将你的项目打包上传至服务器.然后放置到Tomcat目录下的webapps下.\n"),a("img",{attrs:{src:"http://wx1.sinaimg.cn/mw690/89296167gy1fvvasnv5rwj211w0hwn05.jpg",alt:"文件"}})]),t._v(" "),a("p",[t._v("然后进入conf目录下,打开server.xml进行编辑.\n配置域名能直接访问项目,需要在server.xml添加以下代码：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('<Host name="www.xieyezi.com"  appBase="webapps"\n    unpackWARs="true" autoDeploy="true">\n    <Context docBase="C:\\Program Files\\apache-tomcat-9.0.7-windows-x64\\apache-tomcat-9.0.7\\webapps\\Xydesign" path="" reloadable="true"/>\n\x3c!-- SingleSignOn valve, share authentication between web applications\n     Documentation at: /docs/config/valve.html --\x3e\n\x3c!--\n<Valve className="org.apache.catalina.authenticator.SingleSignOn" />\n--\x3e\n\n\x3c!-- Access log processes all example.\n     Documentation at: /docs/config/valve.html\n     Note: The pattern used is equivalent to using pattern="common" --\x3e\n<Valve className="org.apache.catalina.valves.AccessLogValve" directory="logs"\n       prefix="localhost_access_log" suffix=".txt"\n       pattern="%h %l %u %t &quot;%r&quot; %s %b" />\n\n</Host>\n')])])]),a("ol",[a("li",[t._v("配置项目通过域名访问")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('<Host name="www.xieyezi.com"  appBase="hcode"\n          unpackWARs="true" autoDeploy="true">\n')])])]),a("p",[t._v("将Host标签的name设置为你的域名,appBase设置为你的项目的路径(可以为绝对路径和相对路径,你可以看见我这里设置为相对路径).\n配置完成即可保存,然后通过 http://www.xieyezi.com/Xydesign 访问.")]),t._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[t._v("配置项目名缺省进行访问")])]),t._v(" "),a("p",[t._v("一般的,我们一般是直接访问域名就进行访问.而不是通过在域名末尾添加项目名进行访问.")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('<Context docBase="hcode" path="" />\n')])])]),a("p",[t._v("其中,docBase即为项目的绝对路径,此时通过 http://www.xieyezi.com 即可进行项目名缺省的访问.")]),t._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[t._v("部署多个项目到Tomcat")])]),t._v(" "),a("p",[t._v("将你的项目打包放置到webapps路径下,然后在server.xml的Host下面添加以下代码:")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('<Context path="" docBase="" debug="0" reloadable="false"/>\n')])])]),a("p",[t._v("将path标签设置为"),a("code",[t._v("/你的项目名")]),t._v(",docBase设置为"),a("code",[t._v("你的项目根目录的绝对路径")]),t._v(".\n配置完成即可保存,然后通过 http://www.xieyezi.com/项目名 访问.")]),t._v(" "),a("ol",{attrs:{start:"4"}},[a("li",[t._v("https访问配置")])]),t._v(" "),a("p",[t._v("在server.xml添加以下代码:")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('<Connector port="443" protocol="org.apache.coyote.http11.Http11Protocol"\n             maxThreads="150" SSLEnabled="true" scheme="https" secure="true"\n             clientAuth="false"\n              sslProtocol="TLS"\n              keystoreFile="/home/doc/keys/213972284410468.pfx"\n              keystoreType="PKCS12"\n              keystorePass="213972284410468"         />\n')])])]),a("p",[t._v("添加keystoreFile,keystoreType,keystorePass即可进行https访问.")]),t._v(" "),a("ol",{attrs:{start:"5"}},[a("li",[t._v("自动跳转到https连接")])]),t._v(" "),a("p",[t._v("如果希望输入http链接时自动跳转到https,需要在web.xml中添加如下内容:")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("<login-config>\n              \x3c!-- Authorization setting for SSL --\x3e\n              <auth-method>CLIENT-CERT</auth-method>\n                      <realm-name>Client Cert Users-only Area</realm-name>\n      </login-config>\n      <security-constraint>\n              \x3c!-- Authorization setting for SSL --\x3e\n              <web-resource-collection >\n                      <web-resource-name >SSL</web-resource-name>\n                      <url-pattern>/*</url-pattern>\n              </web-resource-collection>\n              <user-data-constraint>\n                      <transport-guarantee>CONFIDENTIAL</transport-guarantee>\n              </user-data-constraint>\n      </security-constraint>\n")])])]),a("p",[t._v("以上内容位置在"),a("code",[t._v("</web-app>")]),t._v("内,添加后输入http访问时会自动跳转到https连接.")])])}),[],!1,null,null,null);e.default=n.exports}}]);